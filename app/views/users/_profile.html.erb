<div class="card mb-4">
  <div class="card-header bg-primary text-white">
    <h4 class="text-center">ユーザー情報</h4>
  </div>
  <div class="card-body text-center">
    <% if current_user %>
      <% user = current_user %> <!-- current_user から user を取得 -->
      <% profile_image_path = user.get_profile_image(100, 100) rescue 'no_profile.jpg' %> <!-- メソッドがない場合の救済措置 -->
      <% if profile_image_path != 'no_profile.jpg' %>
        <%= image_tag profile_image_path, class: 'img-fluid rounded-circle mb-3', style: 'width: 100px; height: 100px;' %>
      <% else %>
        <%= image_tag 'no_profile.jpg', class: 'img-fluid rounded-circle mb-3', style: 'width: 100px; height: 100px;' %>
      <% end %>
      <h5>ユーザー名: <%= user.name %></h5>
      <% if current_user.id == user.id %>
        <%= link_to raw('<i class="fa-solid fa-gear"></i> プロフィールを編集'), edit_user_path(user.id), class: "btn btn-outline-primary mt-3" %>
      <% end %>
    <% else %>
      <%= image_tag 'no_profile.jpg', class: 'img-fluid rounded-circle mb-3', style: 'width: 100px; height: 100px;' %>
      <h5>ユーザー名:</h5>
    <% end %>
    <h5>Follows</h5>
      <%= link_to follows_user_path(user) do %>
        <h5><%= user.followers.count %></h5>
      <% end %>  
    <h5>Followers</h5>
      <%= link_to followers_user_path(user) do %>
        <h5><%= user.followeds.count%></h5>
      <% end %>  
    <% if current_user != user %>
      <% if current_user.following?(user)%>
        <%= link_to "フォロー外す",user_relationships_path(user.id),method: :delete,class:"btn btn-danger"%>
      <% else %>
        <%= link_to "フォローする",user_relationships_path(user.id),method: :post,class:"btn btn-success"%>
      <% end %>
    <% end %>  
  </div>
</div>
